# æµ‹è¯•æŒ‡å—

## ğŸ§ª æµ‹è¯•ç¯å¢ƒè¯´æ˜

### Dev Container ç¯å¢ƒ

åœ¨ Dev Container ä¸­ï¼Œç”±äºæ²¡æœ‰å›¾å½¢ç•Œé¢ï¼ŒKarma æµ‹è¯•éœ€è¦ç‰¹æ®Šé…ç½®ã€‚

**å½“å‰çŠ¶æ€**ï¼š
- âœ… ä»£ç é£æ ¼æ£€æŸ¥ï¼ˆCoffeeLintï¼‰å¯ä»¥æ­£å¸¸è¿è¡Œ
- âš ï¸ æµè§ˆå™¨å•å…ƒæµ‹è¯•éœ€è¦é¢å¤–é…ç½®
- âœ… æ‰‹åŠ¨æµ‹è¯•å¯ä»¥æ­£å¸¸è¿›è¡Œ

### æ¨èçš„æµ‹è¯•æ–¹å¼

#### 1. **Dev Container ä¸­ï¼ˆå½“å‰ç¯å¢ƒï¼‰**

```bash
# åªè¿›è¡Œä»£ç é£æ ¼æ£€æŸ¥
gulp coffeelint

# æ‰‹åŠ¨æµ‹è¯•ï¼ˆæ¨èï¼‰
npm start
# åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•åŠŸèƒ½
```

#### 2. **æœ¬åœ°æœºå™¨ä¸Šï¼ˆæœ‰å›¾å½¢ç•Œé¢ï¼‰**

```bash
# å®Œæ•´æµ‹è¯•ï¼ˆåŒ…æ‹¬å•å…ƒæµ‹è¯•ï¼‰
npm test

# è¿è¡Œå®Œæ•´æµ‹è¯•è„šæœ¬
./test-ai-analysis.sh
```

#### 3. **CI/CD ç¯å¢ƒ**

```bash
# ä½¿ç”¨ Headless Chrome
npm run ci:test
```

---

## ğŸ“‹ å¿«é€Ÿæµ‹è¯•æ¸…å•

### æ‰‹åŠ¨åŠŸèƒ½æµ‹è¯•ï¼ˆDev Container å‹å¥½ï¼‰

```
[ ] 1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼šnpm start
[ ] 2. æ‰“å¼€ Issues é¡µé¢
[ ] 3. ç‚¹å‡» "AI åˆ†æ" æŒ‰é’®
[ ] 4. éªŒè¯ Lightbox å¼¹å‡º
[ ] 5. æ£€æŸ¥åˆ†æç»“æœæ˜¾ç¤º
[ ] 6. å…³é—­ Lightbox
[ ] 7. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ— é”™è¯¯
```

### ä»£ç è´¨é‡æ£€æŸ¥ï¼ˆå¯ä»¥åœ¨å®¹å™¨ä¸­è¿è¡Œï¼‰

```bash
# CoffeeScript ä»£ç æ£€æŸ¥
gulp coffeelint

# SCSS ä»£ç æ£€æŸ¥
npm run scss-lint
```

---

## ğŸ”§ åœ¨å®¹å™¨ä¸­å¯ç”¨å•å…ƒæµ‹è¯•ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ éœ€è¦åœ¨å®¹å™¨ä¸­è¿è¡Œå•å…ƒæµ‹è¯•ï¼Œå¯ä»¥ï¼š

### æ–¹æ³• 1ï¼šä½¿ç”¨ Puppeteerï¼ˆæ¨èï¼‰

å·²ç»å®‰è£… Puppeteerï¼Œä½†éœ€è¦æ­£ç¡®é…ç½®ï¼š

```bash
# è®¾ç½® Chrome è·¯å¾„
export CHROME_BIN=$(node -e "console.log(require('puppeteer').executablePath())")

# è¿è¡Œæµ‹è¯•
npm test -- --single-run
```

å¦‚æœä»ç„¶å¤±è´¥ï¼Œå¯ä»¥å°è¯•ï¼š

```bash
# å®‰è£…ç¼ºå¤±çš„ä¾èµ–
sudo apt-get update
sudo apt-get install -y \
    libnss3 \
    libatk1.0-0 \
    libatk-bridge2.0-0 \
    libcups2 \
    libdrm2 \
    libxkbcommon0 \
    libxcomposite1 \
    libxdamage1 \
    libxfixes3 \
    libxrandr2 \
    libgbm1 \
    libasound2
```

### æ–¹æ³• 2ï¼šä½¿ç”¨ jsdomï¼ˆè½»é‡çº§ï¼‰

å®‰è£… jsdom ç¯å¢ƒï¼š

```bash
npm install --save-dev karma-jsdom-launcher
```

ä¿®æ”¹ `karma.conf.js`ï¼š
```javascript
browsers: ['jsdom']
```

---

## ğŸš€ æ¨èå·¥ä½œæµç¨‹

### å¼€å‘é˜¶æ®µï¼ˆåœ¨ Dev Container ä¸­ï¼‰

```bash
# 1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm start

# 2. ä¿®æ”¹ä»£ç 
code app/coffee/modules/issues/ai-analysis.service.coffee

# 3. æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°ï¼ŒæŸ¥çœ‹æ•ˆæœ

# 4. æ£€æŸ¥ä»£ç é£æ ¼
gulp coffeelint
```

### æäº¤ä»£ç å‰ï¼ˆåœ¨æœ¬åœ°æœºå™¨ï¼‰

```bash
# 1. è¿è¡Œå®Œæ•´æµ‹è¯•
./test-ai-analysis.sh

# 2. ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
# 3. æäº¤ä»£ç 
git commit -m "feat: add AI analysis"
```

### CI/CD è‡ªåŠ¨åŒ–

```yaml
# .github/workflows/test.yml
- name: Run tests
  run: npm run ci:test
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **Dev Container æ˜¯ä¸ºå¼€å‘ä¼˜åŒ–çš„**ï¼Œä¸æ˜¯ä¸ºäº†è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
2. **æ‰‹åŠ¨æµ‹è¯•åœ¨å¼€å‘é˜¶æ®µæ›´é«˜æ•ˆ**
3. **æäº¤å‰åœ¨æœ¬åœ°æœºå™¨è¿è¡Œå®Œæ•´æµ‹è¯•**
4. **CI/CD ä¼šè‡ªåŠ¨è¿è¡Œæ‰€æœ‰æµ‹è¯•**

---

## â“ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆå®¹å™¨ä¸­æµ‹è¯•å¾ˆéš¾è¿è¡Œï¼Ÿ

A: Karma éœ€è¦çœŸå®æµè§ˆå™¨ç¯å¢ƒï¼Œè€Œå®¹å™¨é€šå¸¸æ˜¯æ— å¤´çš„ã€‚è™½ç„¶å¯ä»¥é…ç½® Headless Chromeï¼Œä½†éœ€è¦å¤§é‡ç³»ç»Ÿä¾èµ–ã€‚

### Q: ä¸è¿è¡Œæµ‹è¯•å®‰å…¨å—ï¼Ÿ

A: åœ¨å¼€å‘é˜¶æ®µå¯ä»¥ä¾é æ‰‹åŠ¨æµ‹è¯•ã€‚ä½†**æäº¤ä»£ç å‰åŠ¡å¿…åœ¨æœ¬åœ°æœºå™¨æˆ– CI/CD ä¸­è¿è¡Œå®Œæ•´æµ‹è¯•**ã€‚

### Q: å¦‚ä½•çŸ¥é“ä»£ç æ˜¯å¦æ­£ç¡®ï¼Ÿ

A: 
1. ä»£ç é£æ ¼æ£€æŸ¥ï¼ˆ`gulp coffeelint`ï¼‰
2. æ‰‹åŠ¨åŠŸèƒ½æµ‹è¯•
3. æµè§ˆå™¨æ§åˆ¶å°æ— é”™è¯¯
4. æäº¤å‰å®Œæ•´æµ‹è¯•

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Karma é…ç½®](karma.conf.js)
- [AI åˆ†æåŠŸèƒ½æ–‡æ¡£](AI_åˆ†æåŠŸèƒ½æ–‡æ¡£.md)
- [æµ‹è¯•è„šæœ¬](test-ai-analysis.sh)
